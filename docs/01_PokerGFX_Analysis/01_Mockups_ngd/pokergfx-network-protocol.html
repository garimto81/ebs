<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>네트워크 프로토콜 아키텍처 - PokerGFX</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e1a;
            color: #e0e0e0;
            padding: 40px;
            line-height: 1.6;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            background: #141923;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #4fc3f7;
            font-size: 32px;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            color: #90caf9;
            font-size: 18px;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 300;
        }

        h2 {
            color: #81c784;
            font-size: 24px;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #2d3748;
        }

        h3 {
            color: #ffb74d;
            font-size: 18px;
            margin: 25px 0 15px 0;
        }

        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .protocol-card {
            background: #1e2530;
            border: 2px solid #2d3748;
            border-radius: 6px;
            padding: 20px;
        }

        .protocol-card.wcf {
            border-color: #4fc3f7;
        }

        .protocol-card.tcp {
            border-color: #81c784;
        }

        .protocol-card.atem {
            border-color: #ffb74d;
        }

        .protocol-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2d3748;
        }

        .protocol-card.wcf .protocol-header {
            color: #4fc3f7;
        }

        .protocol-card.tcp .protocol-header {
            color: #81c784;
        }

        .protocol-card.atem .protocol-header {
            color: #ffb74d;
        }

        .protocol-info {
            font-size: 13px;
            color: #b0b0b0;
            margin-bottom: 15px;
        }

        .protocol-info .label {
            color: #90a4ae;
            display: inline-block;
            width: 80px;
        }

        .protocol-info .value {
            color: #e0e0e0;
            font-family: 'Consolas', 'Courier New', monospace;
        }

        .method-list {
            list-style: none;
            font-size: 13px;
            line-height: 1.8;
        }

        .method-list li {
            padding-left: 15px;
            position: relative;
            font-family: 'Consolas', 'Courier New', monospace;
            color: #a0a0a0;
        }

        .method-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #4fc3f7;
        }

        .method-category {
            font-size: 12px;
            font-weight: 600;
            color: #90a4ae;
            margin-top: 15px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .method-category:first-child {
            margin-top: 0;
        }

        .tcp-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            font-size: 12px;
        }

        .tcp-category {
            background: #1a1f2e;
            padding: 12px;
            border-radius: 4px;
            border-left: 3px solid #81c784;
        }

        .tcp-category h4 {
            color: #81c784;
            font-size: 13px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .tcp-category ul {
            list-style: none;
            line-height: 1.6;
        }

        .tcp-category ul li {
            color: #a0a0a0;
            font-family: 'Consolas', 'Courier New', monospace;
            padding-left: 12px;
            position: relative;
        }

        .tcp-category ul li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #81c784;
        }

        .code-block {
            background: #0d1117;
            border: 1px solid #2d3748;
            border-radius: 4px;
            padding: 20px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .code-line {
            color: #a0a0a0;
            line-height: 1.8;
        }

        .code-line .keyword {
            color: #f97583;
        }

        .code-line .type {
            color: #79b8ff;
        }

        .code-line .field {
            color: #b392f0;
        }

        .code-line .comment {
            color: #6a737d;
            font-style: italic;
        }

        .response-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .response-item {
            background: #1a1f2e;
            padding: 10px 15px;
            border-radius: 4px;
            border-left: 3px solid #ffb74d;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 12px;
            color: #a0a0a0;
        }

        .file-ref {
            font-size: 11px;
            color: #6a737d;
            font-style: italic;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #2d3748;
        }

        .atem-layers {
            background: #1a1f2e;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }

        .atem-layers .layer {
            padding: 8px 0;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 13px;
            color: #a0a0a0;
        }

        .atem-layers .layer .num {
            color: #ffb74d;
            font-weight: 600;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>네트워크 프로토콜 아키텍처</h1>
        <div class="subtitle">WCF + Custom TCP + ATEM COM - 이중 프로토콜 설계</div>

        <h2>Section 1: 이중 프로토콜 구조</h2>

        <div class="protocol-grid">
            <!-- Protocol A: WCF -->
            <div class="protocol-card wcf">
                <div class="protocol-header">Protocol A: WCF</div>
                <div class="protocol-info">
                    <div><span class="label">목적:</span> <span class="value">Master-Slave Sync</span></div>
                    <div><span class="label">Transport:</span> <span class="value">NetTcp (binary)</span></div>
                    <div><span class="label">Interface:</span> <span class="value">Iwcf</span></div>
                </div>

                <div class="method-category">9 Methods</div>
                <ul class="method-list">
                    <li>do_ping2(...)</li>
                    <li>get_file_block(...)</li>
                    <li>get_list(...)</li>
                    <li>get_skin_list(...)</li>
                    <li>get_saved_config_crc(...)</li>
                    <li>get_saved_uid_crc(...)</li>
                    <li>get_card_status_block(...)</li>
                    <li>get_license(...)</li>
                    <li>log(...)</li>
                </ul>

                <div class="file-ref">Source: Iwcf.cs</div>
            </div>

            <!-- Protocol B: Custom TCP -->
            <div class="protocol-card tcp">
                <div class="protocol-header">Protocol B: Custom TCP</div>
                <div class="protocol-info">
                    <div><span class="label">목적:</span> <span class="value">ActionTracker ↔ Server</span></div>
                    <div><span class="label">Messages:</span> <span class="value">50+ types</span></div>
                    <div><span class="label">LOC:</span> <span class="value">~6,400</span></div>
                </div>

                <div class="method-category">Send Methods (Categorized)</div>
                <p style="font-size: 12px; color: #90a4ae; margin-top: 10px;">
                    Game Flow (8), Player Actions (10),<br>
                    Graphics Control (8), Text/Ticker (4),<br>
                    Card Operations (5), System (5)
                </p>
                <p style="font-size: 11px; color: #6a737d; margin-top: 15px; font-style: italic;">
                    상세 목록은 하단 섹션 참조
                </p>

                <div class="file-ref">Source: ClientNetworkService.cs</div>
            </div>

            <!-- Protocol C: ATEM COM -->
            <div class="protocol-card atem">
                <div class="protocol-header">Protocol C: ATEM COM</div>
                <div class="protocol-info">
                    <div><span class="label">SDK:</span> <span class="value">BMDSwitcherAPI</span></div>
                    <div><span class="label">Type:</span> <span class="value">COM Interop</span></div>
                    <div><span class="label">Port:</span> <span class="value">9910</span></div>
                    <div><span class="label">LOC:</span> <span class="value">~2,300</span></div>
                </div>

                <div class="method-category">3-Layer Callbacks</div>
                <div class="atem-layers">
                    <div class="layer">
                        <span class="num">1.</span>SwitcherMonitor<br>
                        <span style="margin-left: 30px; color: #6a737d;">(IBMDSwitcherCallback)</span>
                    </div>
                    <div class="layer">
                        <span class="num">2.</span>MixEffectBlockMonitor<br>
                        <span style="margin-left: 30px; color: #6a737d;">(IBMDSwitcherMixEffectBlockCallback)</span>
                    </div>
                    <div class="layer">
                        <span class="num">3.</span>InputMonitor<br>
                        <span style="margin-left: 30px; color: #6a737d;">(IBMDSwitcherInputCallback)</span>
                    </div>
                </div>

                <div style="margin-top: 15px; font-size: 12px; color: #a0a0a0;">
                    Virtual camera mapping:<br>
                    <code style="color: #ffb74d;">ATEM_VIRT_N → physical input</code>
                </div>

                <div class="file-ref">Source: atem.cs</div>
            </div>
        </div>

        <!-- TCP Methods Detail -->
        <h3>Protocol B: TCP Send Methods (40개)</h3>
        <div class="tcp-methods">
            <div class="tcp-category">
                <h4>Game Flow (8)</h4>
                <ul>
                    <li>SendStartHand</li>
                    <li>SendResetHand</li>
                    <li>SendNextHand</li>
                    <li>SendGameClear</li>
                    <li>SendChop</li>
                    <li>SendMissDeal</li>
                    <li>SendRunItTimes</li>
                    <li>SendRunItTimesClearBoard</li>
                </ul>
            </div>

            <div class="tcp-category">
                <h4>Player Actions (10)</h4>
                <ul>
                    <li>SendPlayerBet</li>
                    <li>SendPlayerFold</li>
                    <li>SendPlayerWin</li>
                    <li>SendPlayerStack</li>
                    <li>SendPlayerSwap</li>
                    <li>SendPlayerSitOut</li>
                    <li>SendDeletePlayer</li>
                    <li>SendPlayerAdd</li>
                    <li>SendPlayerLongName</li>
                    <li>SendPlayerCountry</li>
                </ul>
            </div>

            <div class="tcp-category">
                <h4>Graphics Control (8)</h4>
                <ul>
                    <li>SendGfxEnable</li>
                    <li>SendShowStrip</li>
                    <li>SendPanelValue</li>
                    <li>SendDelayedPanelValue</li>
                    <li>SendFieldValue</li>
                    <li>SendFieldVisibility</li>
                    <li>SendDelayedFieldVisibility</li>
                    <li>SendVideoSources</li>
                </ul>
            </div>

            <div class="tcp-category">
                <h4>Text/Ticker (4)</h4>
                <ul>
                    <li>SendTicker</li>
                    <li>SendTickerLoop</li>
                    <li>SendGameTitle</li>
                    <li>SendTag</li>
                </ul>
            </div>

            <div class="tcp-category">
                <h4>Card Operations (5)</h4>
                <ul>
                    <li>SendCardEnter</li>
                    <li>SendCardClear</li>
                    <li>SendForceCardScan</li>
                    <li>SendRegisterDeck</li>
                    <li>SendVerifyDeck</li>
                </ul>
            </div>

            <div class="tcp-category">
                <h4>System (5)</h4>
                <ul>
                    <li>SendAuth</li>
                    <li>SendReaderStatus</li>
                    <li>SendHeartBeat</li>
                    <li>SendMediaList</li>
                    <li>SendGameVariantList</li>
                </ul>
            </div>
        </div>

        <h2>Section 2: client_ping 구조</h2>
        <div class="code-block">
            <div class="code-line"><span class="keyword">[DataContract]</span> <span class="type">client_ping</span>:</div>
            <div class="code-line">├── <span class="field">serial</span>: <span class="type">int</span>              <span class="comment">// Client serial number</span></div>
            <div class="code-line">├── <span class="field">regdb_id</span>: <span class="type">long</span>          <span class="comment">// Registration DB ID</span></div>
            <div class="code-line">├── <span class="field">version</span>: <span class="type">string</span>         <span class="comment">// Client version</span></div>
            <div class="code-line">├── <span class="field">os</span>: <span class="type">string</span>              <span class="comment">// Operating system</span></div>
            <div class="code-line">├── <span class="field">session_start</span>: <span class="type">DateTime</span></div>
            <div class="code-line">├── <span class="field">reader_connection</span>: <span class="type">int</span>  <span class="comment">// RFID reader state</span></div>
            <div class="code-line">├── <span class="field">reader_firmware</span>: <span class="type">int</span>    <span class="comment">// Reader firmware version</span></div>
            <div class="code-line">├── <span class="field">reader_version</span>: <span class="type">int</span>     <span class="comment">// Protocol version</span></div>
            <div class="code-line">├── <span class="field">cpu_speed</span>: <span class="type">int</span></div>
            <div class="code-line">├── <span class="field">cpu_usage</span>: <span class="type">int</span>          <span class="comment">// CPU %</span></div>
            <div class="code-line">├── <span class="field">gpu_usage</span>: <span class="type">int</span>          <span class="comment">// GPU %</span></div>
            <div class="code-line">├── <span class="field">config</span>: <span class="type">byte[]</span>          <span class="comment">// Full config binary</span></div>
            <div class="code-line">├── <span class="field">config_crc</span>: <span class="type">int</span>         <span class="comment">// CRC32</span></div>
            <div class="code-line">├── <span class="field">uids</span>: <span class="type">byte[][]</span>          <span class="comment">// 54 RFID card UIDs</span></div>
            <div class="code-line">├── <span class="field">uids_crc</span>: <span class="type">int</span>           <span class="comment">// UID mapping CRC32</span></div>
            <div class="code-line">├── <span class="field">table_connected</span>: <span class="type">bool</span>   <span class="comment">// ActionTracker connected</span></div>
            <div class="code-line">├── <span class="field">action_clock</span>: <span class="type">bool</span></div>
            <div class="code-line">├── <span class="field">is_recording</span>: <span class="type">bool</span></div>
            <div class="code-line">├── <span class="field">is_streaming</span>: <span class="type">bool</span></div>
            <div class="code-line">└── <span class="field">tampered</span>: <span class="type">bool</span>          <span class="comment">// Security flag</span></div>
        </div>
        <div class="file-ref">Source: client_ping.cs</div>

        <h2>Section 3: 서버 → 클라이언트 응답 타입 (14개)</h2>
        <div class="response-grid">
            <div class="response-item">ConnectResponse</div>
            <div class="response-item">DisconnectResponse</div>
            <div class="response-item">AuthResponse</div>
            <div class="response-item">ReaderStatusResponse</div>
            <div class="response-item">HeartBeatResponse</div>
            <div class="response-item">GameInfoResponse</div>
            <div class="response-item">DelayedGameInfoResponse</div>
            <div class="response-item">MediaListResponse</div>
            <div class="response-item">CountryListResponse</div>
            <div class="response-item">PlayerPictureResponse</div>
            <div class="response-item">GameVariantListResponse</div>
            <div class="response-item">PlayerInfoResponse</div>
            <div class="response-item">DelayedPlayerInfoResponse</div>
            <div class="response-item">VideoSourcesResponse</div>
        </div>
        <div style="margin-top: 10px;">
            <div class="response-item" style="display: inline-block; width: auto;">SourceModeResponse</div>
        </div>
        <div class="file-ref">Source: CoreNetworkListener.cs</div>
    </div>
</body>
</html>
