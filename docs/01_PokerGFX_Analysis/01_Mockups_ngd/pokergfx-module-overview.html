<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>시스템 전체 구조 — BNW 720×720</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
    </style>
</head>
<body>
<svg width="720" height="720" viewBox="0 0 720 720" xmlns="http://www.w3.org/2000/svg"
     font-family="'Segoe UI', 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif">

    <!-- Background -->
    <rect x="0" y="0" width="720" height="720" fill="#ffffff"/>

    <!-- Definitions -->
    <defs>
        <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
            <polygon points="0 0, 8 3, 0 6" fill="#777"/>
        </marker>
        <marker id="arrow-rev" markerWidth="8" markerHeight="6" refX="1" refY="3" orient="auto">
            <polygon points="8 0, 0 3, 8 6" fill="#777"/>
        </marker>
    </defs>

    <!-- ===== TITLE ===== -->
    <text x="360" y="30" text-anchor="middle" font-size="20" font-weight="700" fill="#111" letter-spacing="-0.3">시스템 전체 구조</text>
    <text x="360" y="50" text-anchor="middle" font-size="11" fill="#999">6개 모듈 — Server 중심 허브 — 독립 동작 + 중앙 연결</text>

    <!-- ===== CONNECTION LINES (behind modules) ===== -->

    <!-- 1. Card Recognition → Server (unidirectional) -->
    <line x1="172" y1="155" x2="285" y2="248" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)"/>
    <text x="205" y="190" text-anchor="middle" font-size="10" font-weight="600" fill="#555">카드 UID</text>
    <text x="205" y="203" text-anchor="middle" font-size="9" fill="#aaa">USB / Serial</text>

    <!-- 2. Action Tracker ↔ Server (bidirectional) -->
    <line x1="547" y1="155" x2="435" y2="248" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)" marker-start="url(#arrow-rev)"/>
    <text x="510" y="190" text-anchor="middle" font-size="10" font-weight="600" fill="#555">액션 / 상태</text>
    <text x="510" y="203" text-anchor="middle" font-size="9" fill="#aaa">TCP + WCF</text>

    <!-- 3. Server → Viewer Overlay (unidirectional) -->
    <line x1="275" y1="398" x2="120" y2="520" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)"/>
    <text x="180" y="450" text-anchor="middle" font-size="10" font-weight="600" fill="#555">그래픽 프레임</text>
    <text x="180" y="463" text-anchor="middle" font-size="9" fill="#aaa">NDI / 캡처 카드</text>

    <!-- 4. Server → ATEM Switcher (unidirectional) -->
    <line x1="360" y1="398" x2="360" y2="520" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)"/>
    <text x="378" y="450" text-anchor="start" font-size="10" font-weight="600" fill="#555">카메라 전환</text>
    <text x="378" y="463" text-anchor="start" font-size="9" fill="#aaa">COM / Port 9910</text>

    <!-- 5. Server ↔ GFX Console (bidirectional) -->
    <line x1="445" y1="398" x2="600" y2="520" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)" marker-start="url(#arrow-rev)"/>
    <text x="545" y="450" text-anchor="middle" font-size="10" font-weight="600" fill="#555">설정 / 상태</text>
    <text x="545" y="463" text-anchor="middle" font-size="9" fill="#aaa">로컬 IPC</text>

    <!-- ===== MODULES ===== -->

    <!-- Card Recognition (top-left) -->
    <rect x="45" y="68" width="255" height="85" rx="6" fill="#fff" stroke="#333" stroke-width="1.5"/>
    <text x="172" y="94" text-anchor="middle" font-size="14" font-weight="700" fill="#111">Card Recognition</text>
    <text x="172" y="112" text-anchor="middle" font-size="11" fill="#555">테이블 위의 카드를 읽는다</text>
    <text x="172" y="130" text-anchor="middle" font-size="10" fill="#aaa" font-style="italic">26개 안테나 · RFID → UID · 하드웨어 자동</text>

    <!-- Action Tracker (top-right) -->
    <rect x="420" y="68" width="255" height="85" rx="6" fill="#fff" stroke="#333" stroke-width="1.5"/>
    <text x="547" y="94" text-anchor="middle" font-size="14" font-weight="700" fill="#111">Action Tracker</text>
    <text x="547" y="112" text-anchor="middle" font-size="11" fill="#555">운영자가 게임 진행을 추적한다</text>
    <text x="547" y="130" text-anchor="middle" font-size="10" fill="#aaa" font-style="italic">액션 입력 · 좌석 관리 · 별도 프로세스</text>

    <!-- SERVER (center - dark hub) -->
    <rect x="195" y="248" width="330" height="150" rx="8" fill="#1a1a1a" stroke="#000" stroke-width="2"/>
    <text x="360" y="278" text-anchor="middle" font-size="18" font-weight="700" fill="#fff" letter-spacing="3">SERVER</text>
    <text x="360" y="296" text-anchor="middle" font-size="11" fill="#999">데이터 허브 — 모든 데이터가 여기를 거친다</text>
    <line x1="220" y1="306" x2="500" y2="306" stroke="#444" stroke-width="0.5"/>
    <!-- Left column -->
    <circle cx="243" cy="323" r="1.5" fill="#888"/>
    <text x="253" y="327" font-size="10" fill="#ccc">카드 매핑 (UID → 카드)</text>
    <circle cx="243" cy="343" r="1.5" fill="#888"/>
    <text x="253" y="347" font-size="10" fill="#ccc">게임 상태 관리</text>
    <circle cx="243" cy="363" r="1.5" fill="#888"/>
    <text x="253" y="367" font-size="10" fill="#ccc">통계 계산 (승률)</text>
    <!-- Right column -->
    <circle cx="383" cy="323" r="1.5" fill="#888"/>
    <text x="393" y="327" font-size="10" fill="#ccc">핸드 히스토리 DB</text>
    <circle cx="383" cy="343" r="1.5" fill="#888"/>
    <text x="393" y="347" font-size="10" fill="#ccc">보안 딜레이 (1~30분)</text>
    <circle cx="383" cy="363" r="1.5" fill="#888"/>
    <text x="393" y="367" font-size="10" fill="#ccc">Register Deck</text>

    <!-- Viewer Overlay (bottom-left) -->
    <rect x="15" y="520" width="210" height="90" rx="6" fill="#fff" stroke="#333" stroke-width="1.5"/>
    <text x="120" y="548" text-anchor="middle" font-size="14" font-weight="700" fill="#111">Viewer Overlay</text>
    <text x="120" y="566" text-anchor="middle" font-size="11" fill="#555">시청자가 보는 방송 화면</text>
    <text x="120" y="584" text-anchor="middle" font-size="10" fill="#aaa" font-style="italic">홀카드 · 승률 · 팟 · NDI 출력</text>

    <!-- ATEM Switcher (bottom-center) -->
    <rect x="255" y="520" width="210" height="90" rx="6" fill="#fff" stroke="#333" stroke-width="1.5"/>
    <text x="360" y="548" text-anchor="middle" font-size="14" font-weight="700" fill="#111">ATEM Switcher</text>
    <text x="360" y="566" text-anchor="middle" font-size="11" fill="#555">비디오 스위칭 자동화</text>
    <text x="360" y="584" text-anchor="middle" font-size="10" fill="#aaa" font-style="italic">Blackmagic ATEM · Auto Camera</text>

    <!-- GFX Console (bottom-right) -->
    <rect x="495" y="520" width="210" height="90" rx="6" fill="#fff" stroke="#333" stroke-width="1.5"/>
    <text x="600" y="548" text-anchor="middle" font-size="14" font-weight="700" fill="#111">GFX Console</text>
    <text x="600" y="566" text-anchor="middle" font-size="11" fill="#555">설정 · 관리 · 시스템 콘솔</text>
    <text x="600" y="584" text-anchor="middle" font-size="10" fill="#aaa" font-style="italic">비디오 I/O · 스킨 · 통계 설정</text>

    <!-- ===== LEGEND ===== -->
    <rect x="30" y="645" width="660" height="48" rx="6" fill="#fafafa" stroke="#e0e0e0" stroke-width="1"/>

    <!-- Unidirectional -->
    <line x1="55" y1="669" x2="92" y2="669" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)"/>
    <text x="102" y="673" font-size="10" fill="#666">단방향</text>

    <!-- Bidirectional -->
    <line x1="165" y1="669" x2="202" y2="669" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)" marker-start="url(#arrow-rev)"/>
    <text x="212" y="673" font-size="10" fill="#666">양방향</text>

    <!-- Hub legend -->
    <rect x="280" y="661" width="14" height="14" rx="2" fill="#1a1a1a"/>
    <text x="302" y="673" font-size="10" fill="#666">허브 (Server)</text>

    <!-- Module legend -->
    <rect x="400" y="661" width="14" height="14" rx="2" fill="#fff" stroke="#333" stroke-width="1"/>
    <text x="422" y="673" font-size="10" fill="#666">모듈</text>

    <!-- Version -->
    <text x="660" y="673" text-anchor="end" font-size="9" fill="#ccc">PRD v8.1</text>

</svg>
</body>
</html>
