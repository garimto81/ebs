# WSOP+ 연동 방안 계획서

**Version**: 1.0.0
**Date**: 2026-01-30
**Author**: EBS Project Team
**Status**: Planning
**Target Stage**: Stage 2 (2027)

---

## 목차

1. [개요](#개요)
2. [현황 분석](#현황-분석)
3. [연동 시나리오](#연동-시나리오)
4. [권장 구현 전략](#권장-구현-전략)
5. [데이터 흐름도](#데이터-흐름도)
6. [Stage별 로드맵](#stage별-로드맵)
7. [법적 및 보안 검토](#법적-및-보안-검토)
8. [위험 관리](#위험-관리)

---

## 개요

### 목표

> **"WSOP+ 시스템과 EBS를 양방향으로 동기화하여 운영 부담 30% 감소 및 데이터 정확성 100% 달성"**

Stage 2의 핵심 목표는 WSOP+ 데이터베이스와의 완전한 통합을 통해:

- **플레이어 정보** 자동 가져오기
- **칩 카운트** 실시간 동기화
- **핸드 히스토리** 양방향 전송
- **통계 데이터** 자동 업데이트

### 배경

EBS는 WSOP STUDIO의 DB 자산을 내재화하는 것을 핵심 목표로 합니다. Stage 2에서는 WSOP+ 시스템과의 연동을 통해 수동 입력을 최소화하고 데이터 정확성을 극대화합니다.

### 현재 제약사항

- ❌ WSOP.com 공개 개발자 API 미확인
- ❌ 공식 파트너십 미체결
- ⚠️ API 스펙 및 접근 권한 미확보

---

## 현황 분석

### 공식 API 존재 여부

**조사 결론: 공개 개발자 API 미확인**

| 소스 | 조사 일자 | 결과 |
|------|----------|------|
| WSOP.com 개발자 페이지 | 2026-01-30 | 페이지 없음 |
| WSOP+ 모바일 앱 | 2026-01-30 | API 엔드포인트 비공개 |
| 포커 커뮤니티 (Reddit) | 2026-01-30 | 타사 사례 없음 |
| ESPN/PokerGO 기술 블로그 | 2026-01-30 | 구현 세부사항 비공개 |

### 방송 업계 일반적 관행

#### 1. 수동 입력 (가장 일반적)

**현실**: ESPN, PokerGO도 초기에는 수동 입력 사용

- **장점**: 외부 의존성 없음, 즉시 구현 가능
- **단점**: 오타 위험, 지연 발생, 인력 소요

#### 2. 파트너 데이터 피드 (대형 방송사 전용)

**형태**: NDA + 데이터 라이센스 계약

- **비용**: 예상 $10K-100K/년
- **필요 조건**: WSOP 공식 파트너십 체결

#### 3. 스크린 캡처/OCR (비공식)

**기술**: 화면 캡처 → OCR → 데이터 추출

- **위험**: WSOP 이용약관 위반 가능성
- **권장**: ❌ 사용하지 않음

### 필요 데이터 포인트

EBS가 실시간으로 필요한 데이터와 Stage별 대응 방안:

| 데이터 | 우선순위 | Stage 0-1 대응 | Stage 2+ 연동 가능성 | 비고 |
|--------|----------|----------------|---------------------|------|
| **플레이어명** | P0 | 수동 입력 | CSV import 또는 API | 최우선 |
| **칩 카운트** | P0 | 수동 입력 | 실시간 API 연동 | 방송 핵심 |
| **현재 액션** | P1 | EBS 자체 기록 | WebSocket 연동 | EBS RFID 기반 |
| **핸드 히스토리** | P1 | EBS 자체 기록 | 배치 API | 통계 기반 |
| **대회 정보** | P2 | 수동 입력 | CSV import | 초기 데이터 |
| **팟 크기** | P2 | 계산 (칩 기반) | API 연동 | 파생 데이터 |

---

## 연동 시나리오

### 시나리오 1: 완전 수동 입력 ✅ (Stage 0-1 권장)

#### 개요

운영자가 모든 플레이어 정보를 직접 입력하고, EBS는 RFID 감지를 기반으로 액션과 칩 변동을 기록합니다.

#### 데이터 흐름

```
대회 시작 전:
  1. 운영자가 플레이어 명단 수동 입력 (또는 CSV 템플릿 사용)
  2. 각 플레이어 시작 칩 카운트 입력

대회 중:
  3. EBS가 RFID로 핸드 액션 자동 감지
  4. 칩 카운트는 수동으로 업데이트 (간헐적 또는 브레이크 시)
  5. 핸드 히스토리는 EBS 자체 DB에 저장
```

#### 구현 세부사항

**입력 화면 구성:**
- 플레이어 추가/수정 폼
- CSV 일괄 import 기능
- 칩 카운트 수동 입력 폼
- 액션 기록 UI (RFID 감지 기반)

**DB 스키마:**
```sql
CREATE TABLE players (
    id INTEGER PRIMARY KEY,
    tournament_id INTEGER,
    seat_number INTEGER,
    name TEXT NOT NULL,
    starting_chips BIGINT,
    current_chips BIGINT,
    eliminated BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE chip_updates (
    id INTEGER PRIMARY KEY,
    player_id INTEGER,
    previous_amount BIGINT,
    new_amount BIGINT,
    reason TEXT,  -- 'hand_result', 'manual_adjustment'
    updated_at TIMESTAMP,
    FOREIGN KEY (player_id) REFERENCES players(id)
);
```

#### 장점

✅ Stage 0-1에서 즉시 구현 가능
✅ 가장 안정적 (외부 의존성 없음)
✅ WSOP+ 파트너십 없이도 동작
✅ 데이터 정확성 운영자 통제 가능

#### 단점

❌ 운영자 입력 부담 높음
❌ 칩 카운트 실시간 업데이트 불가
❌ 스케일링 시 인력 소요 증가

#### 예상 구현 시간

**2주** (CSV import 포함)

#### 성공 기준

- [ ] 플레이어 10명+ 입력 UI 테스트 완료
- [ ] CSV import/export 기능 검증
- [ ] 수동 칩 업데이트 시간 < 30초/회
- [ ] 운영자 UX 피드백 70%+ 만족도

---

### 시나리오 2: CSV Import + 반자동 ✅ (Stage 1)

#### 개요

WSOP 공식 명단을 CSV 형식으로 받아 일괄 import하고, EBS는 그 이후 자동으로 데이터를 갱신합니다.

#### 데이터 흐름

```
대회 시작 전:
  1. WSOP 공식 명단 CSV 다운로드/준비
  2. EBS CSV import 도구로 일괄 import
  3. 검증 로직 실행 (중복 확인, 누락 체크)

대회 중:
  4. EBS가 RFID로 핸드 히스토리 자동 기록
  5. 칩 카운트는 수동 업데이트 (간헐적, 초당 1-2회)
  6. 통계는 자동으로 집계
```

#### CSV 포맷 정의

**입력 CSV (WSOP 제공 형식 기준):**
```csv
player_id,name,seat_number,starting_chips,nationality,level
1001,John Smith,1,100000,USA,Professional
1002,Jane Doe,2,100000,Canada,Amateur
```

**검증 규칙:**
- player_id 중복 체크
- name 빈 값 체크
- starting_chips > 0 확인
- seat_number 충돌 확인 (테이블 내 중복)

#### 구현 계획

**Backend API:**
```python
POST /api/import/players
{
    "tournament_id": "WSOP-2027-NLHE",
    "csv_data": "...",  # Base64 encoded CSV
    "overwrite": false  # 기존 데이터 덮어쓰기 여부
}

Response:
{
    "imported": 250,
    "updated": 0,
    "errors": 5,
    "error_details": [
        {
            "row": 10,
            "player_id": "1010",
            "error": "Duplicate player_id"
        }
    ]
}
```

**UI 작업:**
- CSV 파일 드래그앤드롭 업로드
- 검증 결과 실시간 표시
- 오류 행 강조 및 수정 기능
- 미리보기 + 확인 화면

#### 장점

✅ Stage 1에서 구현 가능
✅ 수동 입력 시간 99% 단축
✅ 대량 플레이어 처리 가능 (100+ 명)
✅ WSOP와 데이터 동기화 용이
✅ 운영자 부담 대폭 감소

#### 단점

❌ WSOP 공식 명단 CSV 포맷 미확인
❌ 칩 카운트 실시간 동기화 불가
❌ 명단 변경 시 재 import 필요

#### 예상 구현 시간

**1주**

#### 성공 기준

- [ ] CSV import 성공률 99.5%
- [ ] 검증 오류 메시지 명확성 95%+
- [ ] 데이터 정합성 100% (가져온 데이터 vs 실제)
- [ ] 운영자 온보딩 시간 < 5분

---

### 시나리오 3: 파트너 API 연동 ⚠️ (Stage 2+, 협의 필수)

#### 개요

WSOP와 공식 파트너십을 체결하여 API를 통해 실시간 데이터를 동기화합니다.

#### 전제 조건

- ✅ WSOP Production 팀과 파트너십 체결
- ✅ API 스펙 문서 제공받음
- ✅ 데이터 사용 계약 체결 (NDA)
- ✅ 테스트 환경 제공받음

#### 예상 API 엔드포인트

```
RESTful API:
  GET /api/tournaments/{tournament_id}/players
  GET /api/tournaments/{tournament_id}/tables/{table_id}
  PUT /api/tournaments/{tournament_id}/tables/{table_id}/chips
  GET /api/players/{player_id}/stats

WebSocket Events:
  'chip_update': 칩 변동 실시간 알림
  'hand_event': 핸드 액션 알림
  'table_update': 테이블 상태 변경

Batch API:
  POST /api/hands/export: 핸드 히스토리 배치 export
```

#### 데이터 동기화 전략

**1. 초기 로드 (토너먼트 시작)**

```
EBS → WSOP+ API: GET /tournaments/{id}/players
WSOP+ → EBS: 플레이어 목록 (250명)
EBS: 로컬 DB 업데이트
UI: 플레이어 정보 표시
```

**2. 실시간 칩 동기화 (진행 중)**

```
WSOP+ → EBS (WebSocket): chip_update 이벤트
  { player_id: 1001, chips: 150000, timestamp: ... }

EBS:
  - 로컬 DB 업데이트
  - UI 실시간 리플레시
  - 변동 로그 기록

Conflict Detection:
  EBS가 기록한 칩 vs WSOP+가 보내는 칩
  → 5% 이상 차이 발생 시 경고
```

**3. 핸드 히스토리 전송 (핸드 종료 후)**

```
EBS → WSOP+ API: POST /hands
{
  "hand_id": "EBS-2026012800001",
  "tournament_id": "WSOP-2027-NLHE",
  "table_id": "T42",
  "timestamp": "2026-01-28T14:30:00Z",
  "players": [
    { "seat": 1, "player_id": 1001, "cards": "hidden" },
    ...
  ],
  "actions": [
    { "player": 1001, "action": "raise", "amount": 5000, "street": "preflop" },
    ...
  ],
  "board": ["As", "Kh", "7d"],
  "pot": 150000,
  "winners": [{ "seat": 3, "amount": 150000 }]
}

WSOP+ Response:
{ "status": "accepted", "hand_id": "WSOP-XXX", "timestamp": ... }
```

#### DB 스키마 확장

**동기화 상태 추적:**
```sql
CREATE TABLE sync_status (
    id INTEGER PRIMARY KEY,
    entity_type TEXT NOT NULL,  -- 'player', 'chips', 'hand'
    entity_id TEXT NOT NULL,
    wsop_id TEXT UNIQUE,
    last_sync_at TIMESTAMP,
    sync_direction TEXT,  -- 'pull', 'push', 'bidirectional'
    status TEXT DEFAULT 'pending',  -- 'pending', 'synced', 'conflict', 'error'
    error_message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(entity_type, entity_id)
);

CREATE TABLE sync_conflicts (
    id INTEGER PRIMARY KEY,
    entity_type TEXT NOT NULL,
    entity_id TEXT NOT NULL,
    ebs_value TEXT,
    wsop_value TEXT,
    resolution TEXT,  -- 'ebs_wins', 'wsop_wins', 'manual'
    resolved_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 인증 및 권한

| 항목 | 방식 | 비고 |
|------|------|------|
| **인증** | OAuth 2.0 또는 API Key | WSOP에서 제공 |
| **권한 범위** | 토너먼트별 scope | 테이블 단위 격리 |
| **토큰 갱신** | Refresh Token | 만료 시 자동 재발급 |
| **암호화** | TLS 1.3 | 모든 통신 |

#### 폴백 메커니즘

WSOP+ 연결 실패 시 안정적인 운영 보장:

```
연결 상태 모니터링 (5초 간격)
  │
  ├── 정상 (Connected)
  │   └── 실시간 동기화 진행
  │
  └── 연결 끊김 (Disconnected)
      ├── UI에 경고 표시 ("WSOP+ 연결 끊김")
      ├── 자동 폴백: Stage 1 모드 전환 (수동 입력)
      ├── 로컬 이벤트 큐 활성화
      │   └── 변경사항 임시 저장
      ├── 재연결 시도 (exponential backoff)
      └── 연결 복구 시 로컬 큐 자동 동기화
```

#### 에러 핸들링

| 에러 유형 | 감지 방법 | 알림 | 자동 해결 |
|----------|----------|------|----------|
| 칩 카운트 불일치 (> 5%) | 브레이크 비교 | 운영자 경고 | WSOP+ 값으로 덮어쓰기 |
| 플레이어 누락 | 목록 비교 | 운영자 경고 | WSOP+ 자료 추가 |
| 핸드 전송 실패 | ACK 타임아웃 | 시스템 로그 | 재전송 (3회, 지수 백오프) |
| API 응답 지연 | 응답 시간 > 500ms | 모니터링 로그 | 타임아웃 후 폴백 |

#### 구현 난이도 및 비용

**개발 복잡도**: 높음

- API 설계 검토: 2주
- 인증/권한 구현: 1주
- 칩 동기화: 2주
- 플레이어 정보 동기화: 1주
- 핸드 히스토리 전송: 1주
- 폴백 메커니즘: 1주
- 테스트 및 최적화: 2주

**예상 구현 시간**: 2-6주 (API 스펙에 따라)

**비용 추정**:

| 항목 | 비용 |
|------|------|
| 연간 라이센스 | $10K-100K |
| 개발 비용 | $5K-20K |
| 유지보수 (연간) | $2K-5K |

#### 장점

✅ 완전 자동화 (수동 입력 최소화)
✅ 실시간 칩 동기화
✅ WSOP+가 Single Source of Truth
✅ 확장성 우수 (다중 토너먼트)
✅ 정확성 100% (WSOP+ 기준)

#### 단점

❌ WSOP 파트너십 필수 (높은 진입 장벽)
❌ API 사양 미확정
❌ 구현 기간 길어짐 (2-6주)
❌ 지속적인 유지보수 필요
❌ API 변경 시 대응 필요

#### 성공 기준

- [ ] 초기 로드 성능 < 2초 (250명)
- [ ] 칩 동기화 지연 < 500ms (95 percentile)
- [ ] 연결 가동률 99%+ (24시간 기준)
- [ ] 데이터 정합성 100% (칩 카운트)
- [ ] 수동 입력 30% 감소

---

## 권장 구현 전략

### Stage별 권장 시나리오

| Stage | 기간 | 권장 시나리오 | 이유 |
|-------|------|-------------|------|
| **Stage 0** | 2026 H1 | 시나리오 1 (수동) | RFID 검증 집중, 파트너십 미체결 |
| **Stage 1** | 2026 H2 | 시나리오 2 (CSV) | PokerGFX 복제 완료, 수동 입력 우회 |
| **Stage 2 Q1** | 2027 Q1 | 시나리오 2 강화 | WSOP 협의 중, CSV 고도화 |
| **Stage 2 Q3** | 2027 Q3 | 시나리오 3 파일럿 | 파트너십 체결 후 API 파일럿 |
| **Stage 2 Q4+** | 2027 Q4+ | 시나리오 3 본격화 | API 검증 완료 후 전체 이벤트 적용 |

### 우선순위 로직

```
IF 2027 Q1 이전:
  사용 = 시나리오 2 (CSV import)
ELSE IF WSOP 파트너십 체결:
  사용 = 시나리오 3 (API) + 시나리오 2 폴백
ELSE:
  사용 = 시나리오 2 (CSV import) 계속 개선
```

---

## 데이터 흐름도

### 시나리오 1: 수동 입력

```
┌─────────────────────────────────────────────────────────────┐
│                     대회 시작 전                             │
└─────────────────────────────────────────────────────────────┘

  [운영자]
      │
      │ 플레이어 명단 입력 (수동)
      ▼
  ┌──────────────────┐
  │ EBS 플레이어 관리 │
  │  UI (웹/데스크톱) │
  └────────┬─────────┘
           │
           │ 저장
           ▼
  ┌──────────────────┐
  │  EBS 로컬 DB     │
  │  - players       │
  │  - chip_updates  │
  └──────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                     대회 진행 중                             │
└─────────────────────────────────────────────────────────────┘

  [RFID 감지]
      │
      ▼
  ┌──────────────────┐
  │ EBS 카드 감지    │
  │ (ESP32/Python)   │
  └────────┬─────────┘
           │
           │ 카드 정보 (UID만)
           ▼
  ┌──────────────────┐
  │ EBS 액션 기록    │
  │ (자동)           │
  └────────┬─────────┘
           │
           │ 저장
           ▼
  ┌──────────────────┐
  │  EBS 로컬 DB     │
  │  - hand_actions  │
  │  - hands         │
  └────────┬─────────┘
           │
           │ 읽기
           ▼
  [방송 UI (OBS)] ─── [시청자]

  [운영자]
      │
      │ 칩 카운트 수동 업데이트 (5-10분 간격)
      ▼
  ┌──────────────────┐
  │ EBS 칩 입력 UI   │
  └────────┬─────────┘
           │
           │ 저장
           ▼
  ┌──────────────────┐
  │  EBS 로컬 DB     │
  │  - chip_updates  │
  └──────────────────┘
```

### 시나리오 2: CSV Import + 반자동

```
┌─────────────────────────────────────────────────────────────┐
│                     대회 시작 전                             │
└─────────────────────────────────────────────────────────────┘

  [WSOP 공식 명단]
      │
      │ CSV 다운로드
      ▼
  ┌──────────────────┐
  │  player_list.csv │
  │  (250명 데이터)  │
  └────────┬─────────┘
           │
           │ 드래그앤드롭 업로드
           ▼
  ┌──────────────────────┐
  │ EBS CSV Import Tool  │
  │  - 검증              │
  │  - 오류 체크         │
  └────────┬─────────────┘
           │
           │ import 실행
           ▼
  ┌──────────────────┐
  │  EBS 로컬 DB     │
  │  - players (250) │
  └────────┬─────────┘
           │
           │ 읽기
           ▼
  [EBS UI] ─── [확인 후 토너먼트 시작]

┌─────────────────────────────────────────────────────────────┐
│                     대회 진행 중                             │
└─────────────────────────────────────────────────────────────┘

  [RFID 감지] ──┐
  [운영자 입력] ├──> [EBS 액션 기록] ──> [EBS DB] ──> [방송 UI]
  [계산식]     ──┘

  칩 카운트 갱신:
  EBS가 자동 계산하거나 운영자가 수동 입력
  └──> [EBS DB 갱신] ──> [실시간 표시]
```

### 시나리오 3: API 연동

```
┌─────────────────────────────────────────────────────────────┐
│                   토너먼트 시작 (Q1)                         │
└─────────────────────────────────────────────────────────────┘

  [EBS 운영자]
      │
      │ 토너먼트 선택
      ▼
  ┌─────────────────────────┐
  │ EBS API Client          │
  │ (WSOP+ API 연결)        │
  └────────┬────────────────┘
           │
           │ GET /tournaments/{id}/players
           ▼
  [WSOP+ API Server]
           │
           │ Response: 250명 플레이어 데이터
           ▼
  ┌──────────────────┐
  │ EBS 로컬 DB      │
  │ - players (250)  │
  │ - sync_status    │
  └──────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                   대회 진행 중 (실시간)                      │
└─────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────┐
  │     [WSOP+ 시스템]          │
  │  ┌──────────────────────┐   │
  │  │  Real-time Events   │   │
  │  │  - chip_update      │   │
  │  │  - table_change     │   │
  │  │  - player_action    │   │
  │  └──────────────────────┘   │
  └──────────────┬───────────────┘
                 │
                 │ WebSocket Stream
                 ▼
  ┌───────────────────────────┐
  │  EBS Sync Service         │
  │  ┌─────────────────────┐  │
  │  │ Event Listener      │  │
  │  │ Conflict Detection  │  │
  │  │ Data Transform      │  │
  │  └──────────┬──────────┘  │
  └─────────────┼──────────────┘
                │
                │ Update
                ▼
  ┌──────────────────────┐
  │  EBS 로컬 DB         │
  │  - players           │
  │  - chip_updates      │
  │  - sync_status       │
  │  - sync_conflicts    │
  └──────────┬───────────┘
             │
             │ Read/Display
             ▼
  ┌──────────────────────┐
  │  방송 UI (OBS)       │
  │  - 플레이어 정보     │
  │  - 칩 카운트 실시간  │
  │  - 핸드 히스토리     │
  └──────────────────────┘

  ┌─────────────────────────────────┐
  │  [EBS 자체 처리]                │
  │  - RFID 감지 (카드)            │
  │  - 액션 기록                    │
  │  - 핸드 히스토리 구성          │
  └──────────┬──────────────────────┘
             │
             │ 핸드 종료 시 전송
             ▼
  ┌────────────────────────────────┐
  │  POST /api/hands               │
  │  { hand_id, players, actions } │
  └────────────┬────────────────────┘
               │
               ▼
  [WSOP+ API Server]
               │
               │ Response: ACK
               ▼
  ┌──────────────────────┐
  │  EBS sync_status     │
  │  status = "synced"   │
  └──────────────────────┘
```

---

## Stage별 로드맵

### Stage 0-1 (2026 H1-H2): 수동 입력 기반

**목표**: WSOP 연동 없이 EBS 자체 기능 완성

**마일스톤**:

| 월 | 주제 | 산출물 |
|----|------|--------|
| 1-2월 | RFID 하드웨어 검증 | 카드 인식 100% 성공 |
| 3-4월 | PokerGFX 복제 (Stage 0→1) | UI/로직 95% 완성 |
| 5-6월 | 수동 입력 UI 완성 | 플레이어 관리, 칩 입력 |
| 7-12월 | PokerGFX 100% 복제 + 테스트 | Stage 1 Gate 통과 |

**WSOP 연동 준비**:

- [ ] WSOP 공식 연락처 확보
- [ ] EBS 데모 영상 제작
- [ ] 파트너십 제안서 작성

---

### Stage 2 (2027): API 연동

#### Q1 (1월-3월): Alpha - WSOP 협의 + CSV 강화

**목표**: WSOP 데이터 포맷 확정 및 CSV import 최적화

**마일스톤**:

| 월 | 주제 | 산출물 |
|----|------|--------|
| 1월 | WSOP 담당자 컨택 시작 | 첫 미팅 진행 |
| 2월 | CSV 포맷 협의 | 정의서 작성 |
| 3월 | CSV import 고도화 | 자동 검증 완성 |

**산출물**:

- CSV 포맷 정의서
- CSV import 도구 v1.1 (자동 검증)
- 통합 테스트 완료

---

#### Q2 (4월-6월): Beta - 칩 동기화 구현

**전제 조건**: WSOP와 파트너십 협의 진행 또는 완료

**목표**: 칩 카운트 양방향 동기화 프로토타입

**마일스톤**:

| 월 | 주제 | 산출물 |
|----|------|--------|
| 4월 | WSOP API 스펙 획득 | API 문서 검토 |
| 5월 | 칩 동기화 API 구현 | 테스트 환경에서 동작 |
| 6월 | 폴백 메커니즘 구현 | 연결 실패 시 안전 장치 |

**산출물**:

- WSOP API 어댑터 (Python)
- 칩 동기화 서비스
- 모니터링 대시보드

---

#### Q3 (7월-9월): RC - 플레이어/히스토리 동기화

**목표**: 플레이어 정보 + 핸드 히스토리 양방향 동기화

**마일스톤**:

| 월 | 주제 | 산출물 |
|----|------|--------|
| 7월 | 플레이어 정보 동기화 구현 | 자동 시트 배정 |
| 8월 | 핸드 히스토리 전송 구현 | 배치 export |
| 9월 | 통합 테스트 + 최적화 | 성능 검증 |

**산출물**:

- 플레이어 정보 동기화 모듈
- 핸드 히스토리 전송 API
- 충돌 해결 로직

---

#### Q4 (10월-12월): Release - 안정화 + 배포

**목표**: Stage 2 Gate 통과 (99%+ 가동률, 30% 수동 입력 감소)

**마일스톤**:

| 월 | 주제 | 산출물 |
|----|------|--------|
| 10월 | 24시간 스트레스 테스트 | 안정성 검증 |
| 11월 | 운영자 교육 + 문서화 | 가이드 완성 |
| 12월 | Stage 2 Gate 검증 | 지표 달성 확인 |

**산출물**:

- 운영자 가이드 (한/영/중)
- 모니터링 대시보드
- Stage 2 Gate 검증 보고서

---

## 법적 및 보안 검토

### 데이터 사용권

#### 플레이어 정보

| 항목 | 정책 | 비고 |
|------|------|------|
| 이름 | ✅ 공개 데이터 (WSOP.com) | 라이선스 필요 |
| 국적 | ✅ 공개 데이터 | 라이선스 필요 |
| 칩 카운트 | ⚠️ WSOP+ 독점 | 파트너십 필수 |
| 핸드 히스토리 | ⚠️ 방송 기록 | 저작권 협의 필요 |

#### 필수 계약서

1. **데이터 라이센스 계약** (WSOP와)
   - 데이터 사용 범위 정의
   - 독점성 (배타적/비배타적)
   - 기간 및 갱신 조건
   - 비용 (월 또는 연단위)

2. **API 사용 약관** (WSOP와)
   - 레이트 제한
   - 업타임 보장 (SLA)
   - 버전 관리 정책
   - 변경 공지 기간

3. **플레이어 데이터 동의**
   - 개인정보 처리 방침 준수
   - GDPR/국내 법 준수

### 개인정보 보호

#### GDPR 준수 (EU 플레이어)

| 항목 | 조치 | 책임 |
|------|------|------|
| **동의** | 플레이어로부터 명시적 동의 받음 | WSOP (대회 등록 시) |
| **목적 제한** | 방송 목적으로만 사용 | EBS |
| **데이터 최소화** | 필요한 데이터만 수집 | EBS + WSOP |
| **보관 기간** | 방송 후 12개월 삭제 | EBS |
| **주체 권리** | 접근/삭제 요청 처리 | EBS + WSOP |

#### 한국 개인정보보호법 준수

- 개인정보처리방침 수립
- DPA (데이터 처리 담당자) 지정
- 정보보안 감사 연 1회

---

### 보안 요구사항

#### 데이터 암호화

```
전송 중:
  - TLS 1.3 (모든 API)
  - Certificate pinning (앱)

저장 중:
  - AES-256-GCM (민감 데이터)
  - 암호화 키: HSM 또는 환경변수

접근 제어:
  - Role-based access control (RBAC)
  - API 토큰 기반 인증
  - 요청별 로깅
```

#### 감사 로그

```sql
CREATE TABLE audit_log (
    id INTEGER PRIMARY KEY,
    timestamp TIMESTAMP,
    user_id TEXT,
    action TEXT,  -- 'read', 'write', 'delete'
    resource TEXT,  -- 'player', 'chips', 'hand'
    resource_id TEXT,
    details JSON,
    ip_address TEXT
);
```

#### 침입 탐지

- 이상 트래픽 감지 (DDoS)
- API 레이트 제한 (IP당 100 req/min)
- 비정상 접근 패턴 감지

---

## 위험 관리

### 위험 평가

| 위험 | 확률 | 영향도 | 심각도 | 대응책 |
|------|------|--------|--------|--------|
| **WSOP API 공개 거부** | 높음 (70%) | 높음 | 🔴 높음 | 시나리오 2 (CSV) 계속 사용 |
| **파트너십 계약 실패** | 중 (40%) | 높음 | 🔴 높음 | CSV import 강화 + 대안 기술 |
| **API 비용 과다** | 낮음 (20%) | 중 | 🟡 중간 | ROI 분석 후 협상 또는 포기 |
| **API 변경** | 중 (50%) | 중 | 🟡 중간 | 버전 관리 + 어댑터 패턴 |
| **네트워크 불안정** | 낮음 (30%) | 높음 | 🟡 중간 | 로컬 큐 + 자동 재연결 |
| **데이터 정합성 오류** | 낮음 (10%) | 높음 | 🟡 중간 | 자동 검증 + 수동 확인 |

### 위험별 대응 계획

#### 1. WSOP API 공개 거부 (P0)

**시나리오**: 2027 Q2 시점에 WSOP가 API 제공 거부

**대응:**
1. CSV import를 Stage 2의 메인 방식으로 격상
2. Webhook 기반 대안 검토 (WSOP에서 EBS로 푸시)
3. 파트너사 API (GGPoker, poker.tv) 검토

**Fallback 계획:**
```
Stage 2 (2027) 목표 조정:
- 수동 입력 30% 감소 → 15% 감소 (CSV로만)
- 자동화 비율 50% → 30%
- Stage 3에서 보충
```

#### 2. 파트너십 계약 실패 (P1)

**시나리오**: 2027 Q3 협상 결렬

**대응:**
1. CSV import 기능 고도화 (자동 매핑, 중복 제거)
2. 스크린샷 기반 OCR 검토 (법적 검토 후)
3. 포커 산업 표준 포맷 (PokerStars HH) 지원

#### 3. API 비용 과다 (P2)

**시나리오**: 연간 $100K 이상 요청

**대응:**
1. 배치 API로 전환 (실시간 → 1시간 간격)
2. 캐싱 전략 (로컬 복사본 유지)
3. 협상 (사용량 기반 가격 조정)

---

## 의사결정 프레임워크

### WSOP 협상 시 질문 체크리스트

**1단계: 초기 컨택**

- [ ] WSOP Production 담당자 이메일 주소 확보
- [ ] 회사 소개 및 EBS 데모 영상 전송
- [ ] 미팅 일정 확보 (15-30분)

**2단계: 요구사항 협의**

- [ ] API 제공 가능성 확인
- [ ] 필요 데이터 포인트 명시 (플레이어, 칩, 핸드)
- [ ] 업데이트 주기 협의 (실시간 vs 배치)
- [ ] SLA 요구사항 (99.9% uptime)
- [ ] 데이터 보유 기간

**3단계: 계약 협의**

- [ ] 비용 (월/연)
- [ ] 데이터 사용 범위 (방송만? 분석까지?)
- [ ] 배타성 (다른 사업에 사용 가능?)
- [ ] 갱신 조건

**4단계: 기술 협의**

- [ ] API 스펙 문서 제공
- [ ] 테스트 환경 제공
- [ ] 인증 방식 (OAuth? API Key?)
- [ ] 레이트 제한
- [ ] 지원 채널 (이메일? Slack?)

---

## 최종 권장사항

### 우선순위 순서

**1순위 (필수 실행)**
- ✅ Stage 0-1에서 시나리오 1 (수동 입력) 구현
- ✅ 2027 Q1부터 WSOP 컨택 시작
- ✅ CSV import (시나리오 2) 병렬 개발

**2순위 (협의 결과에 따라)**
- ⚠️ WSOP 파트너십 체결되면 → 시나리오 3 (API) 진행
- ⚠️ 파트너십 실패하면 → 시나리오 2 (CSV) 강화

**3순위 (백업 계획)**
- 🔄 포커 산업 표준 (PokerStars HH) 지원
- 🔄 GGPoker/poker.tv 등 대안 파트너 검토

---

## 문서 버전 관리

| 버전 | 작성일 | 주요 변경사항 |
|------|--------|-------------|
| 1.0.0 | 2026-01-30 | 초안 (3가지 시나리오 정의) |

---

## 참고 문서

- `docs/research/RESEARCH-WSOP-Integration.md` - 리서치 결과
- `docs/stage-2/PRD-0003-Stage2-WSOP-Integration.md` - Stage 2 상세 계획
- `docs/PRD-0003-EBS-RFID-System.md` - Master PRD (비전)
- `docs/stage-0/GUIDE-RFID-Implementation.md` - 현재 구현 범위
